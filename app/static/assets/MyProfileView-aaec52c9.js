import{_ as S,u as I,r as _,b as $,d as A,o as c,c as r,t as s,e,f,g as a,h as V,F as B,i as C,j as y,A as x,k as w,w as b,p as M,l as N}from"./index-6f870c3b.js";const n=l=>(M("data-v-cb494716"),l=l(),N(),l),D={class:"container mt-5"},U={key:0,class:"alert alert-info text-center"},E={key:1,class:"alert alert-danger text-center"},F={key:2},L={class:"card mb-4 shadow"},R={class:"row g-0"},j={class:"col-md-4 d-flex justify-content-center align-items-center p-3"},z=["src"],J={class:"col-md-8"},Y={class:"card-body"},O={class:"card-title"},T={class:"card-text"},q=n(()=>e("strong",null,"Email:",-1)),G={class:"card-text"},H=n(()=>e("strong",null,"Joined:",-1)),K=n(()=>e("h5",{class:"mb-3"},"My Profiles",-1)),Q={key:0,class:"alert alert-warning text-center"},W={class:"row"},X={class:"card h-100 shadow-sm"},Z={class:"card-body"},ee={class:"card-title"},te={class:"card-text"},se=n(()=>e("strong",null,"Parish:",-1)),oe={class:"card-text"},ae=n(()=>e("strong",null,"Birth Year:",-1)),ce={class:"card-text"},re=n(()=>e("strong",null,"Favourite Colour:",-1)),ne={class:"card-text"},de=n(()=>e("strong",null,"Favourite Cuisine:",-1)),ie={class:"card-footer text-muted small text-end"},le={__name:"MyProfileView",setup(l){I();const k=localStorage.getItem("user"),u=JSON.parse(k).id;console.log("User ID:",u);const d=_({}),h=_([]),p=_(!0),v=_(""),g=i=>new Date(i).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});return $(async()=>{var i,m;try{const o=localStorage.getItem("token");if(!o)throw new Error("Not authenticated");const t=await y.get(`/api/users/${u}`,{headers:{Authorization:`Bearer ${o}`}}),P=await y.get(`/api/users/${u}/profiles`,{headers:{Authorization:`Bearer ${o}`}});d.value=t.data,h.value=P.data}catch(o){v.value=((m=(i=o.response)==null?void 0:i.data)==null?void 0:m.message)||"Could not load profile data."}finally{p.value=!1}}),(i,m)=>{const o=A("router-link");return c(),r("div",D,[p.value?(c(),r("div",U,"Loading user profile...")):v.value?(c(),r("div",E,s(v.value),1)):(c(),r("div",F,[e("div",L,[e("div",R,[e("div",j,[e("img",{src:d.value.photo?`${f(x)}/uploads/${d.value.photo}`:`${f(x)}/uploads/defaultAvatar.png`,class:"img-fluid rounded-circle user-img",alt:"User Photo"},null,8,z)]),e("div",J,[e("div",Y,[e("h4",O,s(d.value.name),1),e("p",T,[q,a(" "+s(d.value.email),1)]),e("p",G,[H,a(" "+s(g(d.value.date_joined)),1)])])])])]),K,h.value.length===0?(c(),r("div",Q," You haven't created any profiles yet. ")):V("",!0),e("div",W,[(c(!0),r(B,null,C(h.value,t=>(c(),r("div",{key:t.id,class:"col-md-4 mb-4"},[e("div",X,[e("div",Z,[e("h5",ee,s(t.sex)+" - "+s(t.race),1),e("p",te,[se,a(" "+s(t.parish),1)]),e("p",oe,[ae,a(" "+s(t.birth_year),1)]),e("p",ce,[re,a(" "+s(t.fav_colour),1)]),e("p",ne,[de,a(" "+s(t.fav_cuisine),1)]),w(o,{to:`/profiles/${t.id}`,class:"btn btn-outline-primary me-2 mt-2"},{default:b(()=>[a(" View Profile ")]),_:2},1032,["to"]),w(o,{to:`/match-report/${t.id}`,class:"btn btn-outline-success mt-2"},{default:b(()=>[a(" Match Me ")]),_:2},1032,["to"])]),e("div",ie," Created: "+s(g(t.created_at)),1)])]))),128))])]))])}}},ve=S(le,[["__scopeId","data-v-cb494716"]]);export{ve as default};
