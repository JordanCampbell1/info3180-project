import{r as c,b as k,o as e,c as o,e as t,F as v,i as p,h as f,t as a,j as g,f as r,A as l}from"./index-6f870c3b.js";const w={class:"container my-5"},F=t("h2",{class:"mb-4"},"Favourites Report",-1),$={class:"mb-5"},A=t("h4",{class:"mb-3"},"Top 20 Most Favoured Users",-1),B={class:"row"},S={class:"card h-100 text-center shadow-sm"},D=["src"],I={class:"card-body"},N={class:"card-title"},P={class:"text-muted small"},R=t("h4",{class:"mb-3"},"Users You Have Favourited",-1),U={class:"row"},j={class:"card h-100 text-center shadow-sm"},E=["src"],L={class:"card-body"},z={class:"card-title"},M={class:"text-muted small"},V={key:0,class:"text-center mt-4"},C=t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),H=[C],J={key:1,class:"alert alert-danger mt-4 text-center"},q={__name:"Favourites",setup(O){const b=localStorage.getItem("user"),h=JSON.parse(b);console.log("User ID:",h.id);const _=c([]),m=c([]),d=c(!1),i=c("");return k(async()=>{var n,u;d.value=!0;try{const s=localStorage.getItem("token");if(!s)throw new Error("Not authenticated");const[y,x]=await Promise.all([g.get("/api/users/favourites/20",{headers:{Authorization:`Bearer ${s}`}}),g.get(`/api/users/${h.id}/favourites`,{headers:{Authorization:`Bearer ${s}`}})]);m.value=y.data,_.value=x.data}catch(s){i.value=((u=(n=s.response)==null?void 0:n.data)==null?void 0:u.message)||"Failed to load favourites"}finally{d.value=!1}}),(n,u)=>(e(),o("div",w,[F,t("div",$,[A,t("div",B,[(e(!0),o(v,null,p(m.value,s=>(e(),o("div",{key:s.id,class:"col-12 col-sm-6 col-md-4 col-lg-3 mb-4"},[t("div",S,[t("img",{src:s.photo?`${r(l)}/uploads/${s.photo}`:`${r(l)}/uploads/defaultAvatar.png`,class:"card-img-top mx-auto d-block mt-3",alt:"Profile photo",style:{width:"100px",height:"100px","object-fit":"cover","border-radius":"50%"}},null,8,D),t("div",I,[t("h5",N,a(s.username),1),t("p",P,"Favoured "+a(s.favourite_count)+" time(s)",1)])])]))),128))])]),t("div",null,[R,t("div",U,[(e(!0),o(v,null,p(_.value,s=>(e(),o("div",{key:s.id,class:"col-12 col-sm-6 col-md-4 col-lg-3 mb-4"},[t("div",j,[t("img",{src:s.photo?`${r(l)}/uploads/${s.photo}`:`${r(l)}/uploads/defaultAvatar.png`,class:"card-img-top mx-auto d-block mt-3",alt:"Profile photo",style:{width:"100px",height:"100px","object-fit":"cover","border-radius":"50%"}},null,8,E),t("div",L,[t("h5",z,a(s.username),1),t("p",M,a(s.email),1)])])]))),128))])]),d.value?(e(),o("div",V,H)):f("",!0),i.value?(e(),o("div",J,a(i.value),1)):f("",!0)]))}};export{q as default};
