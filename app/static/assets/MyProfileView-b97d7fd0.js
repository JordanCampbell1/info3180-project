import{_ as w,u as b,r as _,b as k,d as P,o as a,c as r,t as s,a as e,e as c,f as S,F as V,g as C,h as g,i as I,w as B,p as N,j as $}from"./index-5599e6d4.js";const n=i=>(N("data-v-93bc8ae9"),i=i(),$(),i),A={class:"container mt-5"},M={key:0,class:"alert alert-info text-center"},D={key:1,class:"alert alert-danger text-center"},F={key:2},j={class:"card mb-4 shadow"},E={class:"row g-0"},L={class:"col-md-4 d-flex justify-content-center align-items-center p-3"},R=["src"],U={class:"col-md-8"},z={class:"card-body"},J={class:"card-title"},Y={class:"card-text"},O=n(()=>e("strong",null,"Email:",-1)),T={class:"card-text"},q=n(()=>e("strong",null,"Joined:",-1)),G=n(()=>e("h5",{class:"mb-3"},"My Profiles",-1)),H={key:0,class:"alert alert-warning text-center"},K={class:"row"},Q={class:"card h-100 shadow-sm"},W={class:"card-body"},X={class:"card-title"},Z={class:"card-text"},ee=n(()=>e("strong",null,"Parish:",-1)),te={class:"card-text"},se=n(()=>e("strong",null,"Birth Year:",-1)),oe={class:"card-text"},ae=n(()=>e("strong",null,"Favourite Colour:",-1)),re={class:"card-text"},ce=n(()=>e("strong",null,"Favourite Cuisine:",-1)),ne={class:"card-footer text-muted small text-end"},le={__name:"MyProfileView",setup(i){b();const y=localStorage.getItem("user"),v=JSON.parse(y).id,l=_({}),u=_([]),m=_(!0),h=_(""),f=d=>new Date(d).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});return k(async()=>{var d,p;try{const o=localStorage.getItem("token");if(!o)throw new Error("Not authenticated");const t=await g.get(`http://localhost:8080/api/users/${v}`,{headers:{Authorization:`Bearer ${o}`}}),x=await g.get(`http://localhost:8080/api/users/${v}/profiles`,{headers:{Authorization:`Bearer ${o}`}});l.value=t.data,u.value=x.data}catch(o){h.value=((p=(d=o.response)==null?void 0:d.data)==null?void 0:p.message)||"Could not load profile data."}finally{m.value=!1}}),(d,p)=>{const o=P("router-link");return a(),r("div",A,[m.value?(a(),r("div",M,"Loading user profile...")):h.value?(a(),r("div",D,s(h.value),1)):(a(),r("div",F,[e("div",j,[e("div",E,[e("div",L,[e("img",{src:l.value.photo?`http://localhost:8080/uploads/${l.value.photo}`:"http://localhost:8080/uploads/defaultAvatar.png",class:"img-fluid rounded-circle user-img",alt:"User Photo"},null,8,R)]),e("div",U,[e("div",z,[e("h4",J,s(l.value.username),1),e("p",Y,[O,c(" "+s(l.value.email),1)]),e("p",T,[q,c(" "+s(f(l.value.date_joined)),1)])])])])]),G,u.value.length===0?(a(),r("div",H," You haven't created any profiles yet. ")):S("",!0),e("div",K,[(a(!0),r(V,null,C(u.value,t=>(a(),r("div",{key:t.id,class:"col-md-4 mb-4"},[e("div",Q,[e("div",W,[e("h5",X,s(t.sex)+" - "+s(t.race),1),e("p",Z,[ee,c(" "+s(t.parish),1)]),e("p",te,[se,c(" "+s(t.birth_year),1)]),e("p",oe,[ae,c(" "+s(t.fav_colour),1)]),e("p",re,[ce,c(" "+s(t.fav_cuisine),1)]),I(o,{to:`/profiles/${t.id}`,class:"btn btn-outline-primary mt-2"},{default:B(()=>[c("View Profile")]),_:2},1032,["to"])]),e("div",ne," Created: "+s(f(t.profile_created)),1)])]))),128))])]))])}}},ue=w(le,[["__scopeId","data-v-93bc8ae9"]]);export{ue as default};
