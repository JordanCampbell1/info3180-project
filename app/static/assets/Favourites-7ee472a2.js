import{r as c,b as x,o,c as e,a as t,F as _,g as m,f as p,t as a,h as v}from"./index-cf9fca1d.js";const y={class:"container my-5"},k=t("h2",{class:"mb-4"},"Favourites Report",-1),w={class:"mb-5"},F=t("h4",{class:"mb-3"},"Top 20 Most Favoured Users",-1),B={class:"row"},S={class:"card h-100 text-center shadow-sm"},$=["src"],A={class:"card-body"},D={class:"card-title"},N={class:"text-muted small"},I=t("h4",{class:"mb-3"},"Users You Have Favourited",-1),P={class:"row"},R={class:"card h-100 text-center shadow-sm"},U=["src"],j={class:"card-body"},z={class:"card-title"},E={class:"text-muted small"},L={key:0,class:"text-center mt-4"},M=t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),V=[M],C={key:1,class:"alert alert-danger mt-4 text-center"},T={__name:"Favourites",setup(H){const g=localStorage.getItem("user"),n=JSON.parse(g);console.log("User ID:",n.id);const h=c([]),u=c([]),l=c(!1),r=c("");return x(async()=>{var d,i;l.value=!0;try{const s=localStorage.getItem("token");if(!s)throw new Error("Not authenticated");const[f,b]=await Promise.all([v.get("http://localhost:8080/api/users/favourites/20",{headers:{Authorization:`Bearer ${s}`}}),v.get(`http://localhost:8080/api/users/${n.id}/favourites`,{headers:{Authorization:`Bearer ${s}`}})]);u.value=f.data,h.value=b.data}catch(s){r.value=((i=(d=s.response)==null?void 0:d.data)==null?void 0:i.message)||"Failed to load favourites"}finally{l.value=!1}}),(d,i)=>(o(),e("div",y,[k,t("div",w,[F,t("div",B,[(o(!0),e(_,null,m(u.value,s=>(o(),e("div",{key:s.id,class:"col-12 col-sm-6 col-md-4 col-lg-3 mb-4"},[t("div",S,[t("img",{src:s.photo?`http://localhost:8080/uploads/${s.photo}`:"http://localhost:8080/uploads/defaultAvatar.png",class:"card-img-top mx-auto d-block mt-3",alt:"Profile photo",style:{width:"100px",height:"100px","object-fit":"cover","border-radius":"50%"}},null,8,$),t("div",A,[t("h5",D,a(s.username),1),t("p",N,"Favoured "+a(s.favourite_count)+" time(s)",1)])])]))),128))])]),t("div",null,[I,t("div",P,[(o(!0),e(_,null,m(h.value,s=>(o(),e("div",{key:s.id,class:"col-12 col-sm-6 col-md-4 col-lg-3 mb-4"},[t("div",R,[t("img",{src:s.photo?`http://localhost:8080/uploads/${s.photo}`:"http://localhost:8080/uploads/defaultAvatar.png",class:"card-img-top mx-auto d-block mt-3",alt:"Profile photo",style:{width:"100px",height:"100px","object-fit":"cover","border-radius":"50%"}},null,8,U),t("div",j,[t("h5",z,a(s.username),1),t("p",E,a(s.email),1)])])]))),128))])]),l.value?(o(),e("div",L,V)):p("",!0),r.value?(o(),e("div",C,a(r.value),1)):p("",!0)]))}};export{T as default};
