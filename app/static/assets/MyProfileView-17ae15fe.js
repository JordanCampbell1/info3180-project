import{_ as k,u as P,r as _,b as S,d as I,o as c,c as r,t as s,a as t,e as a,f as V,F as C,g as M,h as f,i as y,w as x,p as $,j as B}from"./index-a9c919b9.js";const n=i=>($("data-v-7dd2aedb"),i=i(),B(),i),N={class:"container mt-5"},A={key:0,class:"alert alert-info text-center"},D={key:1,class:"alert alert-danger text-center"},F={key:2},U={class:"card mb-4 shadow"},j={class:"row g-0"},E={class:"col-md-4 d-flex justify-content-center align-items-center p-3"},L=["src"],R={class:"col-md-8"},z={class:"card-body"},J={class:"card-title"},Y={class:"card-text"},O=n(()=>t("strong",null,"Email:",-1)),T={class:"card-text"},q=n(()=>t("strong",null,"Joined:",-1)),G=n(()=>t("h5",{class:"mb-3"},"My Profiles",-1)),H={key:0,class:"alert alert-warning text-center"},K={class:"row"},Q={class:"card h-100 shadow-sm"},W={class:"card-body"},X={class:"card-title"},Z={class:"card-text"},tt=n(()=>t("strong",null,"Parish:",-1)),et={class:"card-text"},st=n(()=>t("strong",null,"Birth Year:",-1)),ot={class:"card-text"},at=n(()=>t("strong",null,"Favourite Colour:",-1)),ct={class:"card-text"},rt=n(()=>t("strong",null,"Favourite Cuisine:",-1)),nt={class:"card-footer text-muted small text-end"},dt={__name:"MyProfileView",setup(i){P();const w=localStorage.getItem("user"),u=JSON.parse(w).id;console.log("User ID:",u);const d=_({}),h=_([]),m=_(!0),p=_(""),g=l=>new Date(l).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});return S(async()=>{var l,v;try{const o=localStorage.getItem("token");if(!o)throw new Error("Not authenticated");const e=await f.get(`http://localhost:8080/api/users/${u}`,{headers:{Authorization:`Bearer ${o}`}}),b=await f.get(`http://localhost:8080/api/users/${u}/profiles`,{headers:{Authorization:`Bearer ${o}`}});d.value=e.data,h.value=b.data}catch(o){p.value=((v=(l=o.response)==null?void 0:l.data)==null?void 0:v.message)||"Could not load profile data."}finally{m.value=!1}}),(l,v)=>{const o=I("router-link");return c(),r("div",N,[m.value?(c(),r("div",A,"Loading user profile...")):p.value?(c(),r("div",D,s(p.value),1)):(c(),r("div",F,[t("div",U,[t("div",j,[t("div",E,[t("img",{src:d.value.photo?`http://localhost:8080/uploads/${d.value.photo}`:"http://localhost:8080/uploads/defaultAvatar.png",class:"img-fluid rounded-circle user-img",alt:"User Photo"},null,8,L)]),t("div",R,[t("div",z,[t("h4",J,s(d.value.name),1),t("p",Y,[O,a(" "+s(d.value.email),1)]),t("p",T,[q,a(" "+s(g(d.value.date_joined)),1)])])])])]),G,h.value.length===0?(c(),r("div",H," You haven't created any profiles yet. ")):V("",!0),t("div",K,[(c(!0),r(C,null,M(h.value,e=>(c(),r("div",{key:e.id,class:"col-md-4 mb-4"},[t("div",Q,[t("div",W,[t("h5",X,s(e.sex)+" - "+s(e.race),1),t("p",Z,[tt,a(" "+s(e.parish),1)]),t("p",et,[st,a(" "+s(e.birth_year),1)]),t("p",ot,[at,a(" "+s(e.fav_colour),1)]),t("p",ct,[rt,a(" "+s(e.fav_cuisine),1)]),y(o,{to:`/profiles/${e.id}`,class:"btn btn-outline-primary me-2 mt-2"},{default:x(()=>[a(" View Profile ")]),_:2},1032,["to"]),y(o,{to:`/match-report/${e.id}`,class:"btn btn-outline-success mt-2"},{default:x(()=>[a(" Match Me ")]),_:2},1032,["to"])]),t("div",nt," Created: "+s(g(e.created_at)),1)])]))),128))])]))])}}},ut=k(dt,[["__scopeId","data-v-7dd2aedb"]]);export{ut as default};
